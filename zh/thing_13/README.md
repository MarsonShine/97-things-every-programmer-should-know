# 代码布局很重要

多年前，我曾经在一个 COBOL 系统上工作过，在那里，员工只有在已经有修改代码的理由时才能修改缩进，因为曾经有人让一行代码滑入了行首的特殊列中，结果导致了一些问题。即使布局有时候会误导我们，这个规定仍然适用，所以我们不得不非常小心地阅读代码，因为我们无法相信它。这种政策肯定花费了大量的程序员时间。

有研究表明，在编程过程中，我们花在浏览和阅读代码上的时间要比实际键入代码的时间多得多。

- *易于扫描*。人们非常擅长视觉模式匹配（这是我们在大草原上发现狮子的时代遗留下来的），因此我可以通过标准化的方式，让所有与领域不直接相关的东西，即大多数商业语言中的“意外复杂性”，淡出我们的视野。如果行为相同的代码看起来都是一样的，那么我的感知系统就会帮我找出它们的不同之处。这就是为什么我也会遵守关于如何在编译单元中布局类的各个部分的约定：常量、字段、公共方法、私有方法。

- *具有表现力的布局*。我们都学会了花时间找到正确的名称，这样我们的代码就能尽可能清楚地表达它所做的事情，而不仅仅是罗列步骤，对吗？代码的布局也是表现力的一部分。第一步是让团队就基本的自动格式化达成一致，然后我可能会在编码时手动进行调整。除非存在积极的分歧，否则一个团队会很快形成一种共同的“手工完成”的风格。对我来说，更重要的是换行和分组要反映代码的意图，而不仅仅是语言的语法。(凯文-麦奎尔（Kevin McGuire）让我摆脱了自动代码格式化工具的束缚）。

- *紧密布局*。屏幕上的内容越多，我就能看到越多的内容，而不用通过滚动或切换文件来中断上下文，这意味着我可以在脑中保留更少的状态。对于 8 个字符的名称和行式打印机来说，长程序注释和大量空白是合理的，但现在我使用的集成开发环境可以进行语法着色和交叉链接。像素是我的限制因素，因此我希望每一个像素都能帮助我理解代码。我希望布局能帮助我理解代码，但仅此而已。

一位非程序员朋友曾说过，代码看起来就像一首诗。我从真正优秀的代码中体会到了这种感觉，即文本中的一切都有其目的，都是为了帮助我理解代码的思想。遗憾的是，写代码并不像写诗那样浪漫。

作者：[Steve Freeman](http://programmer.97things.oreilly.com/wiki/index.php/Steve_Freeman)

