# 通过删除代码来改进代码

*少*即是多。这是一句很老套的格言，但有时确实是真理。

在过去几周里，我对我们的代码库进行了改进，其中一项就是删除大块代码。

我们在编写软件时遵循了 XP 的原则，包括 YAGNI（即“你不需要它”）。人之常情，我们不可避免地在一些地方做得不够好。

我发现产品在执行某些任务时花费了太多时间，而这些简单的任务本应近乎立即完成。这是因为它们被过度实现了；被多余的装饰物所包围，而这些装饰物并不需要，但在当时似乎是一个好主意。

因此，我简化了代码，提高了产品性能，并通过从代码库中删除违规功能，降低了全局代码熵的水平。值得庆幸的是，我的单元测试告诉我，我在操作过程中没有破坏任何其他功能。

这是一次简单而令人满意的体验。

那么，为什么这些不必要的代码会出现在这里呢？为什么一个程序员觉得有必要编写额外的代码，它又是如何通过审核或配对流程的呢？几乎可以肯定的是：

- 这是一段有趣的额外代码，程序员想写它。*提示：写代码是因为它能增加价值，而不是因为它能取悦你。*
- 有人认为将来可能会用到它，所以觉得最好现在就编写。*提示：这不是 YAGNI。如果现在不需要，就不要现在写。）*
- 这似乎并不是什么大的“额外”需求，所以与其回到客户那里看是否真的需要，还不如直接实现它。*提示：编写和维护额外的代码总是需要更长的时间。而客户其实是很容易接受的。随着时间的推移，一小段额外的代码就会变成一大段需要维护的工作。）*
- 程序员编造了一些既没有记录也没有讨论过的额外需求来证明额外功能的合理性。这个要求实际上是假的。*提示：程序员不会设定系统要求，客户才会。*

你现在正在做什么？都需要吗？

作者：[Pete Goodliffe](http://programmer.97things.oreilly.com/wiki/index.php/Pete_Goodliffe)