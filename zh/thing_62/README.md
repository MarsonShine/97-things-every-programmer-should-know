# 只有代码能告诉我们真相

程序的最终语义由运行代码给出。如果只有二进制形式，阅读起来会很困难！不过，如果是你的程序、任何典型的商业软件开发、开放源代码项目或动态解释语言的代码，都应该有源代码。通过查看源代码，程序的含义应该一目了然。要想知道程序的功能，最终只能通过查看源代码来确定。即使是最准确的需求文档也不能说明全部事实：它并不包含程序实际运行的详细故事，而只是需求分析师的高层意图。设计文档可以记录计划中的设计，但缺乏必要的实施细节。这些文档可能与当前的实施不同步......也可能已经丢失。或者根本就没有编写。源代码可能是唯一留下的东西。

考虑到这一点，问问你自己，你的代码能清楚地告诉你或其他程序员它在做什么吗？

你可能会说："哦，我的注释会告诉你需要知道的一切"。但请记住，注释并不是运行中的代码。它们和其他形式的文档一样可能是错误的。一直以来，人们都认为注释是无条件的好东西，因此一些程序员会不加思索地编写越来越多的注释，甚至重述和解释代码中已经显而易见的琐事。这是澄清代码的错误方法。如果你的代码需要注释，请考虑重构代码，使其不需要注释。冗长的注释会扰乱屏幕空间，甚至会被集成开发环境自动隐藏。如果您需要解释某个改动，请在版本控制系统的签入信息中解释，而不是在代码中。

如何才能让代码尽可能清楚地说明事实呢？努力创造好名字。根据连贯的功能来组织代码，这样也便于命名。解耦代码以实现正交性。编写自动测试，解释预期行为并检查接口。当你学会如何编写更简单、更好的解决方案时，要毫不留情地进行重构。让代码尽可能简单易读易懂。

像对待诗歌、散文、公共博客或重要电子邮件等其他作品一样对待代码。仔细斟酌你所表达的内容，使其发挥应有的作用，并尽可能直接地传达它正在做的事情，这样当你不在的时候，它仍能传达你的意图。请记住，有用代码的使用时间远远超过你的预期。维护程序员会感谢你的。此外，如果你是一名维护程序员，而你正在处理的代码并不容易说出真相，那么请积极主动地应用上述指导原则。在代码中建立一些理智，保持你自己的理智。

作者：[Peter Sommerlad](http://programmer.97things.oreilly.com/wiki/index.php/Peter_Sommerlad)