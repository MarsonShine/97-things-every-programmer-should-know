# 比起原始类型，我们更喜欢领域类型

1999 年 9 月 23 日，价值 3.276 亿美元的火星气候轨道器在进入环绕火星的轨道时，由于地球上的一个软件错误而丢失。这个错误后来被称为*度量混淆*。地面站软件是以磅为单位工作的，而航天器期望的是牛顿，导致地面站低估了航天器推进器的功率，低估了 4.45 倍。

这是许多软件故障中的一个例子，如果采用更强大、更针对特定领域的类型，这些故障是可以避免的。这也是 Ada 语言许多功能背后原理的一个例子，Ada 语言的主要设计目标之一就是实现嵌入式安全关键软件。Ada 具有强大的类型功能，可对原始类型和用户定义类型进行静态检查：

```
类型 Velocity_In_Knots 是新的浮点类型，范围为 0.0 ... 500.00；

Distance_In_Nautical_Miles 类型是范围为 0.0 ... 3000.00 的新浮点类型；

Velocity： Velocity_In_Knots；

距离 Distance_In_Nautical_Miles；

Some_Number： Float；

Some_Number:= Distance + Velocity; -- 将被编译器捕获为类型错误。
```

要求不高的领域的开发人员也可能受益于应用更多特定领域类型，否则他们可能会继续使用语言及其库提供的原始数据类型，如字符串和浮点数。在 Java、C++、Python 和其他现代语言中，抽象数据类型被称为类。使用类（如 "Velocity_In_Knots "和 "Distance_In_Nautical_Miles"）可以大大提高代码质量：

- 代码变得更可读，因为它表达的是一个领域的概念，而不仅仅是浮点数或字符串。
- 由于代码封装了易于测试的行为，代码变得更易于测试。
- 代码便于在应用程序和系统中重复使用。

这种方法对静态类型语言和动态类型语言的用户同样适用。唯一的区别是，使用静态类型语言的开发人员可以从编译器中获得一些帮助，而使用动态类型语言的开发人员则更倾向于依赖单元测试。检查的风格可能不同，但表达的动机和风格并不相同。

为了开发高质量的软件，我们应该开始探索领域类型。

作者：[Einar Landre](http://programmer.97things.oreilly.com/wiki/index.php/Einar_Landre)