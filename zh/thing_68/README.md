# 将一切置于版本控制之下

将所有项目中的所有内容都置于版本控制之下。你需要的资源都在这里：免费工具，如 Subversion、Git、Mercurial 和 CVS；充足的磁盘空间；廉价而强大的服务器；无处不在的网络；甚至还有项目托管服务。安装完版本控制软件后，你只需要在包含代码的干净目录中发出相应的命令，就可以把你的工作放到版本库中。只需学习两个新的基本操作：将代码修改*提交*到版本库，以及用版本库的版本更新项目的工作版本。

一旦你的项目处于版本控制之下，你显然可以跟踪它的历史，查看谁写了什么代码，并通过唯一标识符来引用文件或项目版本。更重要的是，你可以毫无顾虑地大胆修改代码--不再需要注释代码以备将来不时之需，因为旧版本安全地保存在版本库中。您可以（也应该）用一个符号名称来标记一个软件版本，这样您就可以很容易地在将来重新查看客户运行的软件的确切版本。您可以创建并行开发分支：大多数项目都有一个活跃的开发分支和一个或多个维护分支，用于支持已发布的版本。

版本控制系统可最大限度地减少开发人员之间的摩擦。当程序员在独立的软件部分上工作时，这些部分几乎会被神奇地整合在一起。当他们互相干涉时，系统会注意到并允许他们解决冲突。通过一些额外的设置，系统可以将每次承诺的变更通知所有开发人员，从而建立起对项目进度的共识。

在建立项目时，不要吝啬：将*所有*项目的资产都置于版本控制之下。除源代码外，还包括文档、工具、构建脚本、测试用例、美工甚至库。将整个项目安全地存放在（定期备份的）存储库中，可以最大限度地减少磁盘或数据丢失造成的损失。在新机器上进行开发设置时，只需从资源库中取出项目即可。这简化了代码在不同平台上的发布、构建和测试：在每台机器上，一个更新命令就能确保软件是当前版本。

当你领略到版本控制系统的美妙之处后，遵循几条规则会让你和你的团队更加高效：

- 在单独的操作中提交每个逻辑变更。将许多更改集中在一次提交中，将来就很难将它们分开。当你进行整个项目的重构或样式更改时，这一点尤为重要，因为它们很容易掩盖其他修改。
- 在每次提交时附上解释性信息。至少要简明扼要地描述你所做的改动，但如果你还想记录改动的理由，这里就是最好的存储位置。
- 最后，要避免提交会破坏项目构建的代码，否则你将不受项目其他开发人员的欢迎。

版本控制系统下的生活太美好了，不能因为容易避免的失误而毁了它。

作者：[Diomidis Spinellis](http://programmer.97things.oreilly.com/wiki/index.php/Diomidis_Spinellis)