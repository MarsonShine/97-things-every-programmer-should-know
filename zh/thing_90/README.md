# 冗长的日志会扰乱你的睡眠

当我遇到一个已经在开发或生产中运行了一段时间的系统时，真正麻烦的第一个迹象总是肮脏的日志。你知道我在说什么。当点击网页上正常流程中的一个链接时，系统提供的唯一日志中就会出现大量信息。过多的日志记录和没有日志记录一样毫无用处。

如果你的系统和我的一样，当你的工作完成后，别人的工作才刚刚开始。系统开发完成后，希望它能为客户提供长久而繁荣的服务。如果你幸运的话。当系统投入生产时，如果出了问题，你如何知道，又如何处理？

也许有人帮你监控系统，也许你自己监控系统。无论哪种方式，日志都可能是监控的一部分。如果出现问题，需要唤醒你来处理，你要确保有充分的理由。如果我的系统快不行了，我想知道。但如果只是一个小插曲，我宁愿享受我的美容觉。

对于许多系统来说，出错的第一个迹象就是日志信息被写入某个日志。大多数情况下，这就是错误日志。所以，帮你自己一个忙：从第一天开始就确保，如果错误日志中记录了什么，你愿意让人半夜打电话叫醒你。如果能在系统测试期间模拟系统负载，那么查看无噪音的错误日志也是一个很好的初步迹象，表明系统具有合理的鲁棒性。如果系统不健全，也可以提前发出警告。

分布式系统增加了另一层复杂性。您必须决定如何处理外部依赖失败。如果系统非常分散，这种情况可能会经常发生。请确保您的日志记录策略考虑到了这一点。

一般来说，一切正常的最好证明就是优先级较低的消息都在愉快地运行。我希望每个重要的应用程序事件都有一条 INFO 级别的日志信息。

杂乱无章的日志表明，一旦系统投入生产，将很难控制。如果你不希望在错误日志中出现任何东西，那么当有东西出现时，你就会更容易知道该怎么做。

作者：[Johannes Brodwall](http://programmer.97things.oreilly.com/wiki/index.php/Johannes_Brodwall)